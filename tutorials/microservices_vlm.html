<!-- Elements added to main will be displayed on all pages -->

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Showcasing generative AI projects that run on Jetson">
      
      
      
      
        <link rel="prev" href="microservices_intro.html">
      
      
        <link rel="next" href="../tutorial_text-generation.html">
      
      
      <link rel="icon" href="../images/nvidia-favicon-rgb-16x16px@2x.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.17">
    
    
      
        <title>Microservices for VLM - NVIDIA Jetson AI Lab</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=NVIDIA-NALA:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"NVIDIA-NALA";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/colors.css">
    
      <link rel="stylesheet" href="../css/extra.css">
    
      <link rel="stylesheet" href="../css/nvidia-font.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-SXH8S4Y8RW"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-SXH8S4Y8RW",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-SXH8S4Y8RW",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="nv-black-green" data-md-color-primary="nv-black-green" data-md-color-accent="nv-black-green">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#local-vlm-microservices" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="NVIDIA Jetson AI Lab" class="md-header__button md-logo" aria-label="NVIDIA Jetson AI Lab" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            NVIDIA Jetson AI Lab
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Microservices for VLM
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="nv-black-green" data-md-color-primary="nv-black-green" data-md-color-accent="nv-black-green"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../index.html" class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../models.html" class="md-tabs__link">
        
  
  
    
  
  Models

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../tutorial-intro.html" class="md-tabs__link">
          
  
  
    
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../benchmarks.html" class="md-tabs__link">
        
  
  
    
  
  Benchmarks

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../community_articles.html" class="md-tabs__link">
        
  
  
    
  
  Projects

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../research.html" class="md-tabs__link">
        
  
  
    
  
  Research Group

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="NVIDIA Jetson AI Lab" class="md-nav__button md-logo" aria-label="NVIDIA Jetson AI Lab" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    NVIDIA Jetson AI Lab
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../models.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Models
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial-intro.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Jetson Setup Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Jetson Setup Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../initial_setup_jon.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🚀 Initial Setup Guide - Jetson Orin Nano
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../initial_setup_jon_sdkm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🛸 Initial Setup (SDK Manager method)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tips_ssd-docker.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🔖 SSD + Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tips_ram-optimization.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🔖 Memory optimization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hackathon.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🏆 Hackathon Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    AI Microservices
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            AI Microservices
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="microservices_intro.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Microservices Intro
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Microservices for VLM
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="microservices_vlm.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Microservices for VLM
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-local-vlm-microservices" class="md-nav__link">
    <span class="md-ellipsis">
      1. Local VLM Microservices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Local VLM Microservices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gemma-3-4b-on-ollama" class="md-nav__link">
    <span class="md-ellipsis">
      Gemma-3-4b on Ollama
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#llm-text-only" class="md-nav__link">
    <span class="md-ellipsis">
      LLM - Text-only
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LLM - Text-only">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#curl-request-with-text-only" class="md-nav__link">
    <span class="md-ellipsis">
      Curl Request with Text-only
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vlm-with-image" class="md-nav__link">
    <span class="md-ellipsis">
      VLM - With Image
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VLM - With Image">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-vision-api" class="md-nav__link">
    <span class="md-ellipsis">
      The "Vision API"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#curl-request-with-image" class="md-nav__link">
    <span class="md-ellipsis">
      Curl Request with Image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Python Examples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vlm-usage-in-frameworks" class="md-nav__link">
    <span class="md-ellipsis">
      VLM usage in frameworks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VLM usage in frameworks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#open-webui" class="md-nav__link">
    <span class="md-ellipsis">
      Open WebUI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#n8n" class="md-nav__link">
    <span class="md-ellipsis">
      n8n
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-augmented-vlm-microservice" class="md-nav__link">
    <span class="md-ellipsis">
      2. Augmented VLM Microservice
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Augmented VLM Microservice">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#challenges-with-local-video-source" class="md-nav__link">
    <span class="md-ellipsis">
      Challenges with Local Video Source
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solution" class="md-nav__link">
    <span class="md-ellipsis">
      Solution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-vila-microservice" class="md-nav__link">
    <span class="md-ellipsis">
      Example - VILA Microservice
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Text (LLM)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Text (LLM)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_text-generation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    text-generation-webui
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_ollama.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ollama
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_openwebui.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Open WebUI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_llamaspeak.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    llamaspeak
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_nano-llm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NanoLLM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tensorrt_llm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TensorRT-LLM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_slm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Small LLM (SLM)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_api-examples.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Examples
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Text + Vision (VLM)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Text + Vision (VLM)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_llava.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LLaVA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_live-llava.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Live LLaVA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_nano-vlm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NanoVLM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../llama_vlm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Llama 3.2 Vision
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../agent_studio.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agent Studio
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../vit/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Vision Transformers (ViT)
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            Vision Transformers (ViT)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vit/tutorial_efficientvit.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EfficientViT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vit/tutorial_nanoowl.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NanoOWL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vit/tutorial_nanosam.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NanoSAM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vit/tutorial_sam.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SAM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vit/tutorial_tam.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TAM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_distillation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    📑 Knowledge Distillation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Robotics & Embodiment
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            Robotics & Embodiment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cosmos.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cosmos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../genesis.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Genesis 🆕
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lerobot.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LeRobot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ros.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ROS2 Nodes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../openvla.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenVLA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../robopoint.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RoboPoint 🆕
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Image Generation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            Image Generation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_comfyui_flux.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Flux & ComfyUI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_stable-diffusion.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stable Diffusion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_stable-diffusion-xl.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stable Diffusion XL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nerf.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    nerfstudio
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_9" >
        
          
          <label class="md-nav__link" for="__nav_3_9" id="__nav_3_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    RAG & Vector Database
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9">
            <span class="md-nav__icon md-icon"></span>
            RAG & Vector Database
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_nanodb.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NanoDB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_llamaindex.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LlamaIndex
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_jetson-copilot.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Jetson Copilot
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_10" >
        
          
          <label class="md-nav__link" for="__nav_3_10" id="__nav_3_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    SDK Integrations
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_10">
            <span class="md-nav__icon md-icon"></span>
            SDK Integrations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_holoscan.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Holoscan SDK
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_jps.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Jetson Platform Services
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_gapi_workflows.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gapi Workflows
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_gapi_microservices.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gapi Micro Services
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_ultralytics.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ultralytics YOLOv8
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_11" >
        
          
          <label class="md-nav__link" for="__nav_3_11" id="__nav_3_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Audio
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_11">
            <span class="md-nav__icon md-icon"></span>
            Audio
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_whisper.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Whisper
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_audiocraft.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AudioCraft
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_voicecraft.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VoiceCraft
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../benchmarks.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Benchmarks
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../community_articles.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Projects
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../research.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Research Group
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-local-vlm-microservices" class="md-nav__link">
    <span class="md-ellipsis">
      1. Local VLM Microservices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Local VLM Microservices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gemma-3-4b-on-ollama" class="md-nav__link">
    <span class="md-ellipsis">
      Gemma-3-4b on Ollama
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#llm-text-only" class="md-nav__link">
    <span class="md-ellipsis">
      LLM - Text-only
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LLM - Text-only">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#curl-request-with-text-only" class="md-nav__link">
    <span class="md-ellipsis">
      Curl Request with Text-only
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vlm-with-image" class="md-nav__link">
    <span class="md-ellipsis">
      VLM - With Image
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VLM - With Image">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-vision-api" class="md-nav__link">
    <span class="md-ellipsis">
      The "Vision API"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#curl-request-with-image" class="md-nav__link">
    <span class="md-ellipsis">
      Curl Request with Image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Python Examples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vlm-usage-in-frameworks" class="md-nav__link">
    <span class="md-ellipsis">
      VLM usage in frameworks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VLM usage in frameworks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#open-webui" class="md-nav__link">
    <span class="md-ellipsis">
      Open WebUI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#n8n" class="md-nav__link">
    <span class="md-ellipsis">
      n8n
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-augmented-vlm-microservice" class="md-nav__link">
    <span class="md-ellipsis">
      2. Augmented VLM Microservice
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Augmented VLM Microservice">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#challenges-with-local-video-source" class="md-nav__link">
    <span class="md-ellipsis">
      Challenges with Local Video Source
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solution" class="md-nav__link">
    <span class="md-ellipsis">
      Solution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-vila-microservice" class="md-nav__link">
    <span class="md-ellipsis">
      Example - VILA Microservice
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<p><img align="right" alt="" src="../images/AugVLM.png" width="40%" /></p>
<h1 id="local-vlm-microservices">Local VLM Microservices</h1>
<p>Local VLM (Vision Language Model) microservices can unlock a <strong>new class of applications</strong> for VLMs at the edge, as it can enable capabilities and performance that cloud-hosted VLMs cannot achieve, especially when integrated with <strong>local live video sources</strong>.</p>
<p>In this module, we</p>
<ol>
<li>first look at the example of local VML microservices and its applications, and then</li>
<li>experiment with the <strong>"Augmented" VLM Microservice</strong> that enables the efficient local video source ingestion and explore the applications.</li>
</ol>
<h2 id="1-local-vlm-microservices">1. Local VLM Microservices</h2>
<h3 id="gemma-3-4b-on-ollama">Gemma-3-4b on Ollama</h3>
<p>Google <a href="https://developers.googleblog.com/en/introducing-gemma3/">launched Gemma 3 in March 2025</a>, introducing multimodal support for models with over 4 billion parameters, enabling vision input alongside text processing.</p>
<p>Let's run the 4B model using Ollama.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Ollama Docker Container</label><label for="__tabbed_1_2">Ollama natively installed</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span><span class="se">\</span>
--gpus<span class="w"> </span>all<span class="w"> </span>--network<span class="o">=</span>host<span class="w"> </span><span class="se">\</span>
-e<span class="w"> </span><span class="nv">OLLAMA_HOST</span><span class="o">=</span><span class="s2">&quot;0.0.0.0:9000&quot;</span><span class="w"> </span><span class="se">\</span>
-e<span class="w"> </span><span class="nv">OLLAMA_MODEL</span><span class="o">=</span>gemma3:4b<span class="w"> </span><span class="se">\</span>
-e<span class="w"> </span><span class="nv">OLLAMA_CONTEXT_LENGTH</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span><span class="se">\</span>
-e<span class="w"> </span><span class="nv">OLLAMA_LOGS</span><span class="o">=</span>/root/.ollama/ollama.log<span class="w"> </span><span class="se">\</span>
-v<span class="w"> </span>/mnt/nvme/cache:/root/.cache<span class="w"> </span><span class="se">\</span>
-v<span class="w"> </span>/mnt/nvme/cache/ollama:/root/.ollama<span class="w"> </span><span class="se">\</span>
dustynv/ollama:main-r36.4.0
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This assumes you have installed <code>ollama</code> natively on your Jetson, as shown in this <a href="../tutorial_ollama.html#1-native-install">tutorial section</a>.</p>
</div>
<div class="highlight"><pre><span></span><code>ollama<span class="w"> </span>run<span class="w"> </span>gemma3:4b
</code></pre></div>
</div>
</div>
</div>
<h3 id="llm-text-only">LLM - Text-only</h3>
<h4 id="curl-request-with-text-only">Curl Request with Text-only</h4>
<p>You can reuse the curl command we used in the <a href="microservices_intro.html">earlier tutorial</a>.</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>http://0.0.0.0:9000/v1/chat/completions<span class="w"> </span><span class="se">\</span>
-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;messages&quot;: [</span>
<span class="s1">    {</span>
<span class="s1">        &quot;role&quot;: &quot;system&quot;,</span>
<span class="s1">        &quot;content&quot;: &quot;You are a helpful assistant.&quot;</span>
<span class="s1">    },</span>
<span class="s1">    {</span>
<span class="s1">        &quot;role&quot;: &quot;user&quot;,</span>
<span class="s1">        &quot;content&quot;: &quot;Hello!&quot;</span>
<span class="s1">    }</span>
<span class="s1">    ]</span>
<span class="s1">}&#39;</span>
</code></pre></div>
<p>You will see a response something like this.</p>
<div class="no-copy highlight"><pre><span></span><code><span class="p">{</span>
<span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;chatcmpl-44f2b0d94e0e444e9fcdacfbe38728fc&quot;</span><span class="p">,</span>
<span class="nt">&quot;object&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;chat.completion&quot;</span><span class="p">,</span>
<span class="nt">&quot;created&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1742065798</span><span class="p">,</span>
<span class="nt">&quot;model&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;google/gemma-3-4b-it&quot;</span><span class="p">,</span>
<span class="nt">&quot;choices&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;role&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;assistant&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;reasoning_content&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Hello there! How can I help you today? 😊 \n\nDo you need me to:\n\n*   Answer a question?\n*   Brainstorm ideas?\n*   Write something?\n*   Just chat?\n\nLet me know what&#39;s on your mind!&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;tool_calls&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;logprobs&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;finish_reason&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;stop&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;stop_reason&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">106</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">],</span>
<span class="nt">&quot;usage&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;prompt_tokens&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;total_tokens&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">75</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;completion_tokens&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">57</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;prompt_tokens_details&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<span class="p">},</span>
<span class="nt">&quot;prompt_logprobs&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="vlm-with-image">VLM - With Image</h3>
<h4 id="the-vision-api">The "Vision API"</h4>
<p><a href="https://platform.openai.com/docs/guides/images">OpenAI API Doc</a> shows how to use the vision capabilities through their API. This works with Ollama as well.</p>
<p>You make the request to the same <code>/v1/chat/completions</code> endpoint, and provide extra image information, either by putting a URL for an image file or by providing an image as a Base64-encoded data.</p>
<p><img alt="" class="shadow" src="../images/openai_api_docs_image-and-vision.png" /></p>
<h4 id="curl-request-with-image">Curl Request with Image</h4>
<p>You can test the <code>curl</code> commands in both styles against Ollama server.</p>
<p>You will see the response that shows that it processed the passed or encoded image.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Passing a URL</label><label for="__tabbed_2_2">Passing a Base64 encoded image</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>--location<span class="w"> </span>--request<span class="w"> </span>POST<span class="w"> </span>http://0.0.0.0:9000/v1/chat/completions<span class="w"> </span><span class="se">\</span>
--header<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
--data<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;messages&quot;: [</span>
<span class="s1">    {</span>
<span class="s1">        &quot;role&quot;: &quot;user&quot;,</span>
<span class="s1">        &quot;content&quot;: [</span>
<span class="s1">        {</span>
<span class="s1">            &quot;type&quot;: &quot;text&quot;,</span>
<span class="s1">            &quot;text&quot;: &quot;What is in this image?&quot;</span>
<span class="s1">        },</span>
<span class="s1">        {</span>
<span class="s1">            &quot;type&quot;: &quot;image_url&quot;,</span>
<span class="s1">            &quot;image_url&quot;: {</span>
<span class="s1">                &quot;url&quot;: &quot;https://upload.wikimedia.org/wikipedia/commons/thumb/d/dd/Gfp-wisconsin-madison-the-nature-boardwalk.jpg/2560px-Gfp-wisconsin-madison-the-nature-boardwalk.jpg&quot;</span>
<span class="s1">            }</span>
<span class="s1">        }</span>
<span class="s1">        ]</span>
<span class="s1">    }</span>
<span class="s1">    ],</span>
<span class="s1">    &quot;max_tokens&quot;: 300</span>
<span class="s1">}&#39;</span>
</code></pre></div>
<details class="abstract">
<summary>Example response</summary>
<div class="no-copy highlight"><pre><span></span><code><span class="p">{</span>
<span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;chatcmpl-7055ee78ebd64a7895bdf9a5e22e495e&quot;</span><span class="p">,</span>
<span class="nt">&quot;object&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;chat.completion&quot;</span><span class="p">,</span>
<span class="nt">&quot;created&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1742067887</span><span class="p">,</span>
<span class="nt">&quot;model&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;google/gemma-3-4b-it&quot;</span><span class="p">,</span>
<span class="nt">&quot;choices&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;role&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;assistant&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;reasoning_content&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Here&#39;s a breakdown of what&#39;s in the image:\n\n*   **Wooden boardwalk:** A long, wooden walkway stretches into the image, leading into the grassy field.\n*   **Tall grass and reeds:** The foreground is dominated by very tall, green grass and reeds, creating a lush, natural environment.\n*   **Field/Wetland:** The boardwalk leads into a wide field, which appears to be a wetland or marsh area.\n*   **Trees and shrubs:** A line of trees and shrubs forms the distant horizon.\n*   **Sky:** A vibrant blue sky filled with fluffy white clouds.\n\nOverall, it’s a beautiful landscape shot of a serene wetland area, likely a nature preserve or park, with a boardwalk providing access to the area.&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;tool_calls&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;logprobs&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;finish_reason&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;stop&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;stop_reason&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">106</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">],</span>
<span class="nt">&quot;usage&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;prompt_tokens&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">275</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;total_tokens&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">435</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;completion_tokens&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">160</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;prompt_tokens_details&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<span class="p">},</span>
<span class="nt">&quot;prompt_logprobs&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<span class="p">}</span>
</code></pre></div>
</details>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>--location<span class="w"> </span>--request<span class="w"> </span>POST<span class="w"> </span><span class="s1">&#39;http://0.0.0.0:9000/v1/chat/completions&#39;</span><span class="w"> </span><span class="se">\</span>
--header<span class="w"> </span><span class="s1">&#39;Content-Type: application/json&#39;</span><span class="w"> </span><span class="se">\</span>
--data<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;messages&quot;: [</span>
<span class="s1">    {</span>
<span class="s1">        &quot;role&quot;: &quot;user&quot;,</span>
<span class="s1">        &quot;content&quot;: [</span>
<span class="s1">        {</span>
<span class="s1">            &quot;type&quot;: &quot;text&quot;,</span>
<span class="s1">            &quot;text&quot;: &quot;Describe this icon.&quot;</span>
<span class="s1">        },</span>
<span class="s1">        {</span>
<span class="s1">            &quot;type&quot;: &quot;image_url&quot;,</span>
<span class="s1">            &quot;image_url&quot;: {</span>
<span class="s1">                &quot;url&quot;: &quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAYNJREFUOE9j3CEjU/efkbGakYGBjYEE8J+B4Rfj//+tjNtlZX+SqhlmD9iQHbKy/2EC3CoqDNxKSnB3fL5xg4GZi4uBS04OLvbxwgWGn69ewfkoBvBqazMYzJjBwCUvD1ZwKjQUrFmntxfM/3DuHMPF7GyGH0+fYjcAJGq+YQODgJERw59Pnxj2GRgwsAkKMtifOcPAyMjI8Gz9eobL+fkoIYXiAmQDXm7bxnAhIwOs2HLrVgY+XV3SDLhSWsrwdOVKsAEqJSUMynl5pBnw9vhxsDdAgF1cnEHAwIB4A5jY2BiOe3khAoqZmcHx3DmG1wcOEBcG744eZbjd3Y0SWHpTpjD8//uXOANutrQwfDhzBsUAqeBgBmE7O8IGGC1cyHA+KQlsGzJgExFhUK+pYbhcUIA7GkWdnBikwsIYHi1YwPD+xAkUhYLm5gzyiYkMT1evZni9dy/2hCRsY8PAwsfH8PPlS4YPZ8+iGMBvZMTAISHB8OfzZ4a3hw8jDKA8M1GYnQE8m7INTv0HFQAAAABJRU5ErkJggg==&quot;</span>
<span class="s1">            }</span>
<span class="s1">        }</span>
<span class="s1">        ]</span>
<span class="s1">    }</span>
<span class="s1">    ],</span>
<span class="s1">    &quot;max_tokens&quot;: 128</span>
<span class="s1">}&#39;</span>
</code></pre></div>
<details class="abstract">
<summary>Example response</summary>
<div class="no-copy highlight"><pre><span></span><code><span class="p">{</span>
<span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;chatcmpl-76126099d5ea4560b32ddc74a307a210&quot;</span><span class="p">,</span>
<span class="nt">&quot;object&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;chat.completion&quot;</span><span class="p">,</span>
<span class="nt">&quot;created&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1742068087</span><span class="p">,</span>
<span class="nt">&quot;model&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;google/gemma-3-4b-it&quot;</span><span class="p">,</span>
<span class="nt">&quot;choices&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;role&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;assistant&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;reasoning_content&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Okay, here’s a description of the icon:\n\nIt’s a stylized white \&quot;H\&quot; on a solid red background. The \&quot;H\&quot; appears to have a slight glow or halo effect around it, and it’s somewhat blurred or hazy, giving it a soft, diffused look. \n\nBased on this, it’s most likely the icon for **HBO** (Home Box Office), the television network.&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;tool_calls&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;logprobs&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;finish_reason&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;stop&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;stop_reason&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">106</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">],</span>
<span class="nt">&quot;usage&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;prompt_tokens&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">281</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;total_tokens&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">368</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;completion_tokens&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">87</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;prompt_tokens_details&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<span class="p">},</span>
<span class="nt">&quot;prompt_logprobs&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<span class="p">}</span>
</code></pre></div>
</details>
</div>
</div>
</div>
<h4 id="python-examples">Python Examples</h4>
<p>As demonstrated on the <a href="https://platform.openai.com/docs/guides/images?api-mode=chat&amp;lang=python&amp;format=url">OpenAI Doc page</a>, you can do the same with Python scripts.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure you have installed <code>openai</code> Python library.</p>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>openai
</code></pre></div>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Passing a URL</label><label for="__tabbed_3_2">Passing a Base64 encoded image</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAI</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span>
    <span class="n">base_url</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;OPENAI_BASE_URL&#39;</span><span class="p">,</span> <span class="s1">&#39;http://0.0.0.0:9000/v1&#39;</span><span class="p">),</span>
    <span class="n">api_key</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;google/gemma-3-4b-it&quot;</span><span class="p">,</span>
    <span class="n">messages</span><span class="o">=</span><span class="p">[{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;What&#39;s in this image?&quot;</span><span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;image_url&quot;</span><span class="p">,</span>
                <span class="s2">&quot;image_url&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://upload.wikimedia.org/wikipedia/commons/thumb/d/dd/Gfp-wisconsin-madison-the-nature-boardwalk.jpg/2560px-Gfp-wisconsin-madison-the-nature-boardwalk.jpg&quot;</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">},</span>
        <span class="p">],</span>
    <span class="p">}],</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">os</span><span class="o">,</span><span class="w"> </span><span class="nn">requests</span><span class="o">,</span><span class="w"> </span><span class="nn">base64</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAI</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span>
    <span class="n">base_url</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;OPENAI_BASE_URL&#39;</span><span class="p">,</span> <span class="s1">&#39;http://0.0.0.0:9000/v1&#39;</span><span class="p">),</span>
    <span class="n">api_key</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Function to encode the image</span>
<span class="k">def</span><span class="w"> </span><span class="nf">encode_image</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">toBase64</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Download + convert to base64, or pass through as image_url &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">toBase64</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">url</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to fetch image: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2"> (HTTP </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

    <span class="n">content_type</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span> <span class="s1">&#39;image/jpeg&#39;</span><span class="p">)</span>  <span class="c1"># Default to JPEG</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;data:</span><span class="si">{</span><span class="n">content_type</span><span class="si">}</span><span class="s2">;base64,</span><span class="si">{</span><span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="c1"># Path to your image</span>
<span class="n">image_base_url</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/dusty-nv/jetson-containers/refs/heads/dev/data/images/hoover.jpg&#39;</span>

<span class="c1"># Getting the Base64 string</span>
<span class="n">base64_image</span> <span class="o">=</span> <span class="n">encode_image</span><span class="p">(</span><span class="n">image_base_url</span><span class="p">)</span>

<span class="n">completion</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;google/gemma-3-4b-it&quot;</span><span class="p">,</span>
    <span class="n">messages</span><span class="o">=</span><span class="p">[{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;what&#39;s in this image?&quot;</span> <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;image_url&quot;</span><span class="p">,</span>
                <span class="s2">&quot;image_url&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">base64_image</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">},</span>
        <span class="p">],</span>
    <span class="p">}],</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">completion</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="vlm-usage-in-frameworks">VLM usage in frameworks</h3>
<h4 id="open-webui">Open WebUI</h4>
<p>Let's take a look at how this VLM capability can be used in Open WebUI</p>
<ol>
<li>
<p>As shown in the <a href="microservices_intro.html#example-with-open-webui">earlier tutorial</a>, launch the Open WebUI server.</p>
<details class="abstract">
<summary><code>docker run</code> command to start Open WebUI server</summary>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--name<span class="w"> </span>open-webui<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--network<span class="o">=</span>host<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">PORT</span><span class="o">=</span><span class="m">8080</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">ENABLE_OPENAI_API</span><span class="o">=</span>True<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">ENABLE_OLLAMA_API</span><span class="o">=</span>False<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">OPENAI_API_BASE_URL</span><span class="o">=</span>http://0.0.0.0:9000/v1<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">OPENAI_API_KEY</span><span class="o">=</span>foo<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">AUDIO_STT_ENGINE</span><span class="o">=</span>openai<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">AUDIO_TTS_ENGINE</span><span class="o">=</span>openai<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">AUDIO_STT_OPENAI_API_BASE_URL</span><span class="o">=</span>http://0.0.0.0:8990/v1<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">AUDIO_TTS_OPENAI_API_BASE_URL</span><span class="o">=</span>http://0.0.0.0:8995/v1<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-v<span class="w"> </span>/mnt/nvme/cache/open-webui:/app/backend/data<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">DOCKER_PULL</span><span class="o">=</span>always<span class="w"> </span>--pull<span class="w"> </span>always<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">HF_HUB_CACHE</span><span class="o">=</span>/root/.cache/huggingface<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-v<span class="w"> </span>/mnt/nvme/cache:/root/.cache<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>ghcr.io/open-webui/open-webui:main
</code></pre></div>
</details>
</li>
<li>
<p>On a web browser on a PC (that is on the same network as Jetson), access  <code>http://&lt;JETSON_IP&gt;:8080/</code></p>
</li>
<li>
<p>Go through the sign-in process</p>
</li>
<li>
<p>In the chat box, click on <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M7.75 2a.75.75 0 0 1 .75.75V7h4.25a.75.75 0 0 1 0 1.5H8.5v4.25a.75.75 0 0 1-1.5 0V8.5H2.75a.75.75 0 0 1 0-1.5H7V2.75A.75.75 0 0 1 7.75 2"/></svg></span>(plus) icon and select "<strong><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14 2 6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm4 18V9h-5V4H6v16zm-6-8 4 4h-2.5v3h-3v-3H8z"/></svg></span> Upload Files</strong>", and attach a local image.</p>
</li>
<li>
<p>Supply a text query (e.g. "Describe this image.") and hit "<strong><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 18v-8l3.5 3.5 1.42-1.42L12 6.16l-5.92 5.92L7.5 13.5 11 10v8zM12 2a10 10 0 0 1 10 10 10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2"/></svg></span>(Send message)</strong>" button.</p>
<p><img alt="" class="shadow" src="../images/openwebui_query-with-image.png" /></p>
</li>
<li>
<p>Check the response.</p>
<p><img alt="" class="shadow" src="../images/openwebui_vlm_moon.gif" /></p>
</li>
<li>
<p>Check the log on terminal running Ollama</p>
<p>You may find information like following.</p>
<div class="highlight"><pre><span></span><code>INFO 03-15 20:57:25 [logger.py:39] Received request chatcmpl-ffb41435ad4a4bb990b48ecc341850a9: prompt: &#39;&lt;bos&gt;&lt;start_of_turn&gt;user\n### Task:\nGenerate 1-3 broad tags categorizing the main themes of the chat history, along with 1-3 more specific subtopic tags.\n\n### Guidelines:\n- Start with high-level domains (e.g. Science, Technology, Philosophy, Arts, Politics, Business, Health, Sports, Entertainment, Education)\n- Consider including relevant subfields/subdomains if they are strongly represented throughout the conversation\n- If content is too short (less than 3 messages) or too diverse, use only [&quot;General&quot;]\n- Use the chat\&#39;s primary language; default to English if multilingual\n- Prioritize accuracy over specificity\n\n### Output:\nJSON format: { &quot;tags&quot;: [&quot;tag1&quot;, &quot;tag2&quot;, &quot;tag3&quot;] }\n\n### Chat History:\n&lt;chat_history&gt;\nUSER: Describe the photo.\nASSISTANT: Here\&#39;s a description of the photo:\n\nThe photo showcases a large, full moon dominating the frame. It is a vibrant, creamy white color, with prominent and detailed dark grey and brown craters, maria (smooth, dark plains formed by ancient lava flows), and highlands visible across its surface. \n\nThe background is a solid, dark black, which makes the moon stand out dramatically and emphasizes its round shape.  It appears to be a close-up shot, giving a clear and detailed view of the lunar surface.\n&lt;/chat_history&gt;&lt;end_of_turn&gt;\n&lt;start_of_turn&gt;model\n&#39;, params: SamplingParams(n=1, presence_penalty=0.0, frequency_penalty=0.0, repetition_penalty=1.0, temperature=1.0, top_p=1.0, top_k=-1, min_p=0.0, seed=None, stop=[], stop_token_ids=[], bad_words=[], include_stop_str_in_output=False, ignore_eos=False, max_tokens=7890, min_tokens=0, logprobs=None, prompt_logprobs=None, skip_special_tokens=True, spaces_between_special_tokens=True, truncate_prompt_tokens=None, guided_decoding=None, extra_args=None), prompt_token_ids: None, lora_request: None, prompt_adapter_request: None.
INFO 03-15 20:57:25 [engine.py:289] Added request chatcmpl-ffb41435ad4a4bb990b48ecc341850a9.
INFO:     172.17.0.1:42452 - &quot;POST /v1/chat/completions HTTP/1.1&quot; 200 OK
INFO 03-15 20:57:36 [metrics.py:481] Avg prompt throughput: 48.7 tokens/s, Avg generation throughput: 4.1 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 03-15 20:57:46 [metrics.py:481] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
</code></pre></div>
</li>
</ol>
<h4 id="n8n">n8n</h4>
<p><strong>n8n</strong> is a powerful open-source workflow automation tool that enables seamless integration between various applications, APIs, and services -- making it an excellent choice for <strong>orchestrating LLMs and VLMs</strong>, edge AI deployments, and local AI-powered workflows.</p>
<ol>
<li>
<p>Start n8n server container</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7zm10 2h-6v-2h6zm0-4h-6v-2h6zm0-4h-6V7h6z"/></svg></span> Step-by-step Instruction</label><label for="__tabbed_4_2"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 3.75C0 2.784.784 2 1.75 2h12.5c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0 1 14.25 14H1.75A1.75 1.75 0 0 1 0 12.25Zm1.75-.25a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-8.5a.25.25 0 0 0-.25-.25Z"/><path d="M6 10.559V5.442a.25.25 0 0 1 .379-.215l4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559"/></svg></span> Walk-through video</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<ol>
<li>Go to <a href="../models.html"><strong>Models</strong></a> section of Jetson AI Lab</li>
<li>Go to <strong>Web UI</strong> section, and click "<strong>n8n</strong>" card</li>
<li>Check the parameter, change as needed, and click on the <strong><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"/><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"/></svg></span> ("Copy to clipboard")</strong> icon in the code snippet under the "<strong>Docker Run</strong>" section<ul>
<li>Note the "<strong>Server IP / Port</strong>" section. The default is <strong><code>0.0.0.0:5678</code></strong>.</li>
</ul>
</li>
<li>
<p>Paste the <code>docker run</code> command in Jetson terminal and execute</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span>--name<span class="o">=</span>n8n<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--network<span class="o">=</span>host<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">N8N_LISTEN_ADDRESS</span><span class="o">=</span><span class="m">0</span>.0.0.0<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">N8N_PORT</span><span class="o">=</span><span class="m">5678</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">N8N_SECURE_COOKIE</span><span class="o">=</span><span class="nb">false</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-v<span class="w"> </span>/mnt/nvme/cache/n8n:/root/node/.n8n<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">DOCKER_PULL</span><span class="o">=</span>always<span class="w"> </span>--pull<span class="w"> </span>always<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">HF_HUB_CACHE</span><span class="o">=</span>/root/.cache/huggingface<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-v<span class="w"> </span>/mnt/nvme/cache:/root/.cache<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>n8nio/n8n:stable
</code></pre></div>
</li>
<li>
<p>On a web browser on a PC (that is on the same network as Jetson), access <code>http://&lt;JETSON_IP&gt;:5678/</code></p>
</li>
</ol>
</div>
<div class="tabbed-block">
<p><video controls>
<source src="https://github.com/user-attachments/assets/901a2fde-4376-42af-a829-752e7c207659" type="video/mp4">
Your browser does not support the video tag.
</video></p>
</div>
</div>
</div>
</li>
<li>
<p>First create a "Credential" to configure the connection to the local Ollama server.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7zm10 2h-6v-2h6zm0-4h-6v-2h6zm0-4h-6V7h6z"/></svg></span> Step-by-step Instruction</label><label for="__tabbed_5_2"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 3.75C0 2.784.784 2 1.75 2h12.5c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0 1 14.25 14H1.75A1.75 1.75 0 0 1 0 12.25Zm1.75-.25a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-8.5a.25.25 0 0 0-.25-.25Z"/><path d="M6 10.559V5.442a.25.25 0 0 1 .379-.215l4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559"/></svg></span> Walk-through video</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<ol>
<li>On the n8n top screen, click on "<strong><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M7.75 2a.75.75 0 0 1 .75.75V7h4.25a.75.75 0 0 1 0 1.5H8.5v4.25a.75.75 0 0 1-1.5 0V8.5H2.75a.75.75 0 0 1 0-1.5H7V2.75A.75.75 0 0 1 7.75 2"/></svg></span></strong>" button on the left, and select "<strong>Credential</strong>".</li>
<li>In the "<strong>Add new credential</strong>" prompt box, in the "<strong><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M10.68 11.74a6 6 0 0 1-7.922-8.982 6 6 0 0 1 8.982 7.922l3.04 3.04a.749.749 0 0 1-.326 1.275.75.75 0 0 1-.734-.215ZM11.5 7a4.499 4.499 0 1 0-8.997 0A4.499 4.499 0 0 0 11.5 7"/></svg></span>Search for app...</strong>" field, type "openai" and select "OpenAi". Hit "<strong>Continue</strong>" button.</li>
<li>
<p>In the "<strong>OpenAi account</strong>" prompt box, put the followings;</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>API Key</td>
<td><code>foo</code> (or whatever random)</td>
</tr>
<tr>
<td>Organization ID</td>
<td><code></code> (leave it blank)</td>
</tr>
<tr>
<td>Base URL</td>
<td><code>http://0.0.0.0:9000/v1</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Once done, hit "<strong>Save</strong>" button. Check you get "<strong><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"/></svg></span> Connection tested successfully</strong>" message.</p>
<p><img alt="" class="shadow" src="../images/n8n_OpenAi-account_configured.png" /></p>
</li>
<li>
<p>Put your mouse cursor over the text "OpenAi account" at the top of the prompt box</p>
</li>
<li>"<strong><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"/></svg></span> (Edit)</strong>" icon shows up, so click on it to edit, and name is something like "<strong>Local Ollama</strong>".</li>
<li>
<p>Click <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.75.75 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.75.75 0 0 1-.734-.215L8 9.06l-3.22 3.22a.75.75 0 0 1-1.042-.018.75.75 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06"/></svg></span> icon on the top left corner of the prompt box to close</p>
<p><img alt="" class="shadow" src="../images/n8n_credential_added.png" /></p>
</li>
</ol>
</div>
<div class="tabbed-block">
<p><video controls>
<source src="https://github.com/user-attachments/assets/ef53a91c-1985-4622-95ac-0c6e8055a727" type="video/mp4">
Your browser does not support the video tag.
</video></p>
</div>
</div>
</div>
</li>
<li>
<p>Then create a "<strong>Workflow</strong>" to use the "OpenAI Analyze Image" node to use gemma-3-4b model hosted on Ollama</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7zm10 2h-6v-2h6zm0-4h-6v-2h6zm0-4h-6V7h6z"/></svg></span> Step-by-step Instruction</label><label for="__tabbed_6_2"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 3.75C0 2.784.784 2 1.75 2h12.5c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0 1 14.25 14H1.75A1.75 1.75 0 0 1 0 12.25Zm1.75-.25a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-8.5a.25.25 0 0 0-.25-.25Z"/><path d="M6 10.559V5.442a.25.25 0 0 1 .379-.215l4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559"/></svg></span> Walk-through video</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<ol>
<li>On the n8n top screen, click on "<strong><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M7.75 2a.75.75 0 0 1 .75.75V7h4.25a.75.75 0 0 1 0 1.5H8.5v4.25a.75.75 0 0 1-1.5 0V8.5H2.75a.75.75 0 0 1 0-1.5H7V2.75A.75.75 0 0 1 7.75 2"/></svg></span></strong>" button on the left, and select "<strong>Workflow</strong>".</li>
<li>Click on "<strong>Add first step...</strong>" button in the center</li>
<li>In the right side pane that shows up, in the field "<strong><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M10.68 11.74a6 6 0 0 1-7.922-8.982 6 6 0 0 1 8.982 7.922l3.04 3.04a.749.749 0 0 1-.326 1.275.75.75 0 0 1-.734-.215ZM11.5 7a4.499 4.499 0 1 0-8.997 0A4.499 4.499 0 0 0 11.5 7"/></svg></span>Search for app...</strong>" field, type "openai" and select "OpenAI", the first item.</li>
<li>Under the "<strong>Actions (15)</strong>" section, under "<strong>IMAGE ACTION</strong>" category, find and select "<strong>Analyze Image</strong>"</li>
<li>
<p>In the "<strong>OpenAi account</strong>" prompt box, under the "<strong>Parameters</strong>" tab, put the followings;</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr>
<td>Credential to connect with</td>
<td>"<strong>Local Ollama</strong>"</td>
<td>(or whatever credential you created and named)</td>
</tr>
<tr>
<td>Resource</td>
<td>Image</td>
<td>(default)</td>
</tr>
<tr>
<td>Operation</td>
<td>Analyze Image</td>
<td>(default)</td>
</tr>
<tr>
<td>Model Specify Method</td>
<td>By ID</td>
<td></td>
</tr>
<tr>
<td>Model</td>
<td><strong><code>google/gemma-3-4b-it</code></strong></td>
<td>(Ollama cares this field, so you need to supply the correct name of the model)</td>
</tr>
<tr>
<td>Text Input</td>
<td>"What's in this image"</td>
<td>(default)</td>
</tr>
<tr>
<td>Input Type</td>
<td>Image URL(s)</td>
<td>(default)</td>
</tr>
<tr>
<td>URL</td>
<td>https://raw.githubusercontent.com/dusty-nv/jetson-containers/refs/heads/dev/data/images/hoover.jpg</td>
<td></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click "Test step" button the top right of the prompt box, and check the output shown on the right.</p>
<p><img alt="" src="../images/n8n_analyze-image_test-step.png" /></p>
</li>
</ol>
</div>
<div class="tabbed-block">
<p><video controls>
<source src="https://github.com/user-attachments/assets/8dcf3e0b-279f-45be-b20b-5cdaf02d4a9f" type="video/mp4">
Your browser does not support the video tag.
</video></p>
</div>
</div>
</div>
</li>
</ol>
<h2 id="2-augmented-vlm-microservice">2. Augmented VLM Microservice</h2>
<h3 id="challenges-with-local-video-source">Challenges with Local Video Source</h3>
<p>A <strong>VLM is powerful</strong>, but processing a continuous <strong>local video stream</strong> with it can be complex. Traditional methods require the client to extract frames from the local video source/device, encode them, and send the data over API requests -- adding unnecessary overhead and latency.</p>
<h3 id="solution">Solution</h3>
<p>An "<strong>Augmented VLM Microservice</strong>" eliminates this complexity by internalizing video source management. <br>
Instead of handling frame extraction and encoding, the client can simply point to the video source, letting the microservice handle everything internally and efficiently. Additionally, it can provide optional output streams and useful metrics, making integration with applications seamless and efficient.</p>
<p>This approach reduces client-side complexity, enhances <strong>real-time processing</strong>, and improves overall performance for edge AI applications. 🚀</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:4"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><input id="__tabbed_7_3" name="__tabbed_7" type="radio" /><input id="__tabbed_7_4" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Cloud</label><label for="__tabbed_7_2">Local Microservice</label><label for="__tabbed_7_3">Augmented Microservice</label><label for="__tabbed_7_4">Augmented Microservice (Detailed)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><img alt="" src="../images/microservice-diagram1_cloud.png" /></p>
<blockquote>
<p>Your client application is responsible for managing the video source, extracting the frame.<br>
The API request includes the Base64-encoded image, adding overhead and latency.</p>
</blockquote>
<p><div style="text-align: right;">
<a href="#__tabbed_7_2" class="md-button">When VLM moves to local... <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 10v4h9l-3.5 3.5 2.42 2.42L19.84 12l-7.92-7.92L9.5 6.5 13 10z"/></svg></span></a>
</div></p>
</div>
<div class="tabbed-block">
<p><img alt="" src="../images/microservice-diagram2_local.png" /></p>
<blockquote>
<p>Even when you have a local VLM Microservice, your client application is still responsible for managing the video source, extracting the frame.</p>
</blockquote>
<p><div style="display: flex; justify-content: space-between;">
<a href="#__tabbed_7_1" class="md-button"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 10v4h-9l3.5 3.5-2.42 2.42L4.16 12l7.92-7.92L14.5 6.5 11 10z"/></svg></span> Back</a>
<a href="#__tabbed_7_3" class="md-button">The solution is... <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 10v4h9l-3.5 3.5 2.42 2.42L19.84 12l-7.92-7.92L9.5 6.5 13 10z"/></svg></span></a>
</div></p>
</div>
<div class="tabbed-block">
<p><img alt="" src="../images/microservice-diagram3_AugM-simpliefied.png" /></p>
<blockquote>
<p>The Augmented VLM Microservice internalizes the video source management and frame processing, allowing your client application to only point to the video source and keeping itself simple.</p>
</blockquote>
<p><div style="display: flex; justify-content: space-between;">
<a href="#__tabbed_7_2" class="md-button"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 10v4h-9l3.5 3.5-2.42 2.42L4.16 12l7.92-7.92L14.5 6.5 11 10z"/></svg></span> Back</a>
<a href="#__tabbed_7_4" class="md-button">Details of the Augmented Microservice <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 10v4h9l-3.5 3.5 2.42 2.42L19.84 12l-7.92-7.92L9.5 6.5 13 10z"/></svg></span></a>
</div></p>
</div>
<div class="tabbed-block">
<p><img alt="" src="../images/microservice-diagram4_AugM-detailed.png" /></p>
<blockquote>
<p>The Augmented VLM Microservice can optionally produces output/preview video stream and other useful metrics.</p>
</blockquote>
<p><div style="text-align: left;">
<a href="#__tabbed_7_3" class="md-button"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 10v4h-9l3.5 3.5-2.42 2.42L4.16 12l7.92-7.92L14.5 6.5 11 10z"/></svg></span> Back</a>
</div></p>
</div>
</div>
</div>
<h3 id="example-vila-microservice">Example - VILA Microservice</h3>
<p>Let's take a look at an example augmented VLM microservice, VILA Microservice, which is based on VILA 1.5 - 3B.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7zm10 2h-6v-2h6zm0-4h-6v-2h6zm0-4h-6V7h6z"/></svg></span> Step-by-step Instruction</label><label for="__tabbed_8_2"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 3.75C0 2.784.784 2 1.75 2h12.5c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0 1 14.25 14H1.75A1.75 1.75 0 0 1 0 12.25Zm1.75-.25a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-8.5a.25.25 0 0 0-.25-.25Z"/><path d="M6 10.559V5.442a.25.25 0 0 1 .379-.215l4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559"/></svg></span> Walk-through video</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section assumes you have installed <code>jetson-containers</code>.</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/dusty-nv/jetson-containers
bash<span class="w"> </span>./jetson-containers/install.sh
</code></pre></div>
</div>
<ol>
<li>
<p>Prepare a video source</p>
<div class="tabbed-set tabbed-alternate" data-tabs="9:2"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><input id="__tabbed_9_2" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">USB webcam</label><label for="__tabbed_9_2">RTSP video stream</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Before starting the VILA Microservice container using <code>jetson-containers</code>, first hook up a USB webcam to your Jetson.<br>
Make sure it shows up on <code>ls /dev/video*</code>.</p>
</div>
<div class="tabbed-block">
<p>Follow <a href="https://docs.nvidia.com/jetson/jps/nvstreamer/moj-nvstreamer.html">this instruction</a> to install <code>nvstream</code>, start its container, and upload an MP4 video file to start streaming over RTSP.</p>
</div>
</div>
</div>
</li>
<li>
<p>Start VILA Microservice container</p>
<div class="highlight"><pre><span></span><code>jetson-containers<span class="w"> </span>run<span class="w"> </span>dustynv/vila-microservice:r36.4.0
</code></pre></div>
</li>
<li>
<p>Start n8n server</p>
<p>Follow the <a href="#n8n">instruction above</a>.</p>
</li>
<li>
<p>Make sure you have the credential for <code>http://0.0.0.0:9000/v1</code></p>
<p>You can keep using the credential you made of Ollama as we kept the base URL (and the API scheme) same.<br>
You can also create a dedicated credential for VILA Microservice (in case you customize the port number, etc).</p>
</li>
<li>
<p>Create a "<strong>Workflow</strong>" like before, but be sure to specify your video source in <strong>URL field</strong>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="10:2"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><input id="__tabbed_10_2" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">USB webcam</label><label for="__tabbed_10_2">RTSP video stream</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr>
<td>Credential to connect with</td>
<td>"<strong>Local Ollama</strong>"</td>
<td>Or the one you made for VILA Microservice</td>
</tr>
<tr>
<td>Resource</td>
<td>Image</td>
<td>(default)</td>
</tr>
<tr>
<td>Operation</td>
<td>Analyze Image</td>
<td>(default)</td>
</tr>
<tr>
<td>Model Specify Method</td>
<td><strong><code>By ID</code></strong></td>
<td></td>
</tr>
<tr>
<td>Model</td>
<td><strong><code>Efficient-Large-Model/VILA1.5-3b</code></strong></td>
<td>VILA Microservice does not check this</td>
</tr>
<tr>
<td>Text Input</td>
<td>"What's in this image"</td>
<td>(default)</td>
</tr>
<tr>
<td>Input Type</td>
<td>Image URL(s)</td>
<td>(default)</td>
</tr>
<tr>
<td>URL</td>
<td><strong><code>v4l2:///dev/video0</code></strong></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr>
<td>Credential to connect with</td>
<td>"<strong>Local Ollama</strong>"</td>
<td>Or the one you made for VILA Microservice</td>
</tr>
<tr>
<td>Resource</td>
<td>Image</td>
<td>(default)</td>
</tr>
<tr>
<td>Operation</td>
<td>Analyze Image</td>
<td>(default)</td>
</tr>
<tr>
<td>Model Specify Method</td>
<td><strong><code>By ID</code></strong></td>
<td></td>
</tr>
<tr>
<td>Model</td>
<td><strong><code>Efficient-Large-Model/VILA1.5-3b</code></strong></td>
<td>VILA Microservice does not check this</td>
</tr>
<tr>
<td>Text Input</td>
<td>"What's in this image"</td>
<td>(default)</td>
</tr>
<tr>
<td>Input Type</td>
<td>Image URL(s)</td>
<td>(default)</td>
</tr>
<tr>
<td>URL</td>
<td><strong><code>rtsp://&lt;JETSON_IP&gt;/&lt;PATH_TO_VIDEO_FILE&gt;</code></strong></td>
<td>(e.g. <code>rtsp://10.110.51.72:31554/nvstream/opt/store/nvstreamer_videos/sample_1080p_h264.mp4</code>)</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</li>
<li>
<p>Click "Test step" button the top right of the prompt box, and check the output shown on the right.</p>
<p><img alt="" src="../images/n8n_v4l2_test.png" /></p>
</li>
<li>
<p>Open "VLC". From "<strong>Media</strong>" menu, select "<strong>Open Network Stream...</strong>", input the address in the following format, and hit "Play" button</p>
<div class="highlight"><pre><span></span><code>rtsp://&lt;JETSON_IP&gt;:5011/out
</code></pre></div>
<p><img alt="" src="../images/vlc_network.png" /></p>
</li>
<li>
<p>Try sending another API request by hitting "Test step" button on n8n.</p>
<p>Notice the overlay on the video showing the prompt and response changes (and fade away).</p>
</li>
<li>
<p>If you have multiple video source ready, change the <strong>URL</strong> field, and hit "Test step" button again.</p>
<p>Notice the stream changes to the new input you specify.</p>
</li>
</ol>
</div>
<div class="tabbed-block">
<p><video controls>
<source src="https://github.com/user-attachments/assets/f90e8de7-8659-44b7-92aa-dba79e10aa61" type="video/mp4">
Your browser does not support the video tag.
</video></p>
</div>
</div>
</div>









  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <ul class="global-footer__links"><li><a href="https://www.nvidia.com/en-us/about-nvidia/privacy-policy/" target="_blank">Privacy Policy</a></li><li> <a href="https://www.nvidia.com/en-us/privacy-center/" target="_blank">Manage My Privacy</a> </li> <li> <a href="https://www.nvidia.com/en-us/preferences/email-preferences/" target="_blank">Do Not Sell or Share My Data</a> </li> <li> <a href="https://www.nvidia.com/en-us/about-nvidia/legal-info/" target="_blank">Legal</a> </li> <li> <a href="https://www.nvidia.com/en-us/about-nvidia/accessibility/" target="_blank">Accessibility</a> </li> <li> <a href="https://www.nvidia.com/en-us/about-nvidia/company-policies/" target="_self">Corporate Policies</a> </li> <li> <a href="https://www.nvidia.com/en-us/product-security/" target="_blank">Product Security</a> </li> <li> <a href="https://www.nvidia.com/en-us/contact/" target="_blank">Contact</a> </li> </ul><div class="global-footer__copyright">Copyright &copy; 2024 NVIDIA Corporation</div>
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.indexes", "navigation.expand", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "content.tabs.link", "content.code.copy", "announce.dismiss"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
<!-- OneTrust Cookies Consent Notice start for www.jetson-ai-lab.com -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="018e2d65-efdf-7071-b793-f15ccf25c234" ></script>
<script type="text/javascript">
function OptanonWrapper() {        
        var event = new Event('bannerLoaded');
        window.dispatchEvent(event);
    }
</script>
<!-- OneTrust Cookies Consent Notice end for www.jetson-ai-lab.com -->

 <script type="text/javascript" src="https://images.nvidia.com/aem-dam/Solutions/ot-js/ot-custom.js"></script>
<script src="//assets.adobedtm.com/5d4962a43b79/814eb6e9b4e1/launch-4bc07f1e0b0b.min.js"></script>

      <script src="../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
<script>
  window._6si = window._6si || [];
  window._6si.push(['enableEventTracking', true]);
  window._6si.push(['setToken', 'eb417ec30d332e34d732e2916f185311']);
  window._6si.push(['setEndpoint', 'b.6sc.co']);
  window._6si.push(['enableRetargeting', false]); 

  window._6si.push(['enableCompanyDetails', true]);
  window._6si.push(['setEpsilonKey', '6f578ba72568231347d1bddb7102e53695302c28']);

  (function() {
    var gd = document.createElement('script');
    gd.type = 'text/javascript';
    gd.async = true;
    gd.src = '//j.6sc.co/6si.min.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gd, s);
  })();
</script>
<script type="text/javascript">_satellite.pageBottom();</script>

  </body>
</html>