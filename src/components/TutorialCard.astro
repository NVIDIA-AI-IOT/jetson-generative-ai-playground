---
interface Props {
  tutorial: {
    slug: string;
    data: {
      title: string;
      description: string;
      category: string;
      tags: string[];
      featured?: boolean;
    };
  };
}

const { tutorial } = Astro.props;

const categoryColors: Record<string, string> = {
  'Text': 'bg-blue-100 text-blue-800 border-blue-200',
  'Image': 'bg-purple-100 text-purple-800 border-purple-200',
  'Audio': 'bg-amber-100 text-amber-800 border-amber-200',
  'Multimodal': 'bg-teal-100 text-teal-800 border-teal-200',
  'Fundamentals': 'bg-nvidia-green/10 text-nvidia-green border-nvidia-green/20',
  'default': 'bg-gray-100 text-gray-800 border-gray-200'
};

const categoryColor = categoryColors[tutorial.data.category] || categoryColors['default'];
---

<article 
  class="group relative flex flex-col h-full bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden hover:-translate-y-1"
  data-item
  data-category={tutorial.data.category}
  data-tags={tutorial.data.tags.join(' ')}
>
  <a href={'/tutorials/' + tutorial.slug} class="absolute inset-0 z-10" aria-label={'Open ' + tutorial.data.title}></a>
  
  <div class="p-6 flex flex-col h-full">
    <div class="flex items-center justify-between gap-2 mb-4">
      <div class="flex items-center gap-2 flex-wrap">
        <span class={`px-2.5 py-0.5 rounded-full text-xs font-semibold border ${categoryColor}`}>
          {tutorial.data.category}
        </span>
      </div>
      {tutorial.data.featured && (
        <span class="flex h-2 w-2">
          <span class="animate-ping absolute inline-flex h-2 w-2 rounded-full bg-nvidia-green opacity-75"></span>
          <span class="relative inline-flex rounded-full h-2 w-2 bg-nvidia-green"></span>
        </span>
      )}
    </div>

    <h3 class="text-xl font-bold text-slate-900 group-hover:text-nvidia-green transition-colors mb-3 line-clamp-2" data-title>
      {tutorial.data.title}
    </h3>
    
    <p class="text-slate-600 text-sm leading-relaxed mb-6 line-clamp-3 flex-grow" data-desc>
      {tutorial.data.description}
    </p>

    <div class="mt-auto pt-4 border-t border-gray-100">
      <div class="flex items-center justify-end text-sm text-slate-500">
        <div class="flex items-center gap-1 text-nvidia-green font-semibold group-hover:translate-x-1 transition-transform">
          View Tutorial
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </div>
      </div>
    </div>
  </div>
</article>
